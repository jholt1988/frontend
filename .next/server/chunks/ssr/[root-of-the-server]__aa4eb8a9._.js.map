{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/services/axiosInstance.js"],"sourcesContent":["// src/services/axiosInstance.js\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n// Create base axios instance\r\nconst api = axios.create({\r\n  baseURL: process.env.API_URL || 'http://localhost:5000/api/v1',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n\r\n  },\r\n  \r\n});\r\n\r\n// Automatically attach token (if exists)\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Optional: Global error handler (e.g., auto logout on 401)\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      console.warn('â›” Unauthorized - logging out');\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;AAEhC;;AAGA,6BAA6B;AAC7B,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS;QACP,gBAAgB;IAElB;AAEF;AAEA,yCAAyC;AACzC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAEA,4DAA4D;AAC5D,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;QACnD,QAAQ,IAAI,CAAC;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/services/apiService.js"],"sourcesContent":["// src/services/apiService.js\r\nimport api from './axiosInstance';\r\n\r\nexport const getPayments = async () => {\r\n  const res = await api.get('/payments/mine');\r\n  return res.data;\r\n};\r\n\r\nexport const createMaintenanceRequest = async (data) => {\r\n  const res = await api.post('/maintenance', data);\r\n  return res.data;\r\n};\r\n\r\nexport const getMaintenanceRequests = async () => {\r\n  const res = await api.get('/maintenance');\r\n  return res.data;\r\n};\r\n\r\nexport const updateMaintenanceStatus = async (id, status) => {\r\n  const res = await api.put(`/maintenance/${id}`, { status });\r\n  return res.data;\r\n}\r\nexport const getTenantProfile = async (userId) => {\r\n  const res = await api.get(`/tenant-profile/${userId}`);\r\n  return res.data;\r\n};\r\n\r\nexport const createTenantProfile = async (profile) => {\r\n  const res = await api.post('/tenant-profile', profile);\r\n  return res.data;\r\n};\r\n\r\nexport const updateTenantProfile = async (userId, profile) => {\r\n  const res = await api.put(`/tenant-profile/${userId}`, profile);\r\n  return res.data;\r\n};\r\n\r\nexport const createPayment = async (data) => {\r\n    const res = await api.post('/payments', data);\r\n    return res.data;\r\n  };\r\n  \r\n  export const searchUsers = async (query) => {\r\n    const res = await api.get(`/users?search=${encodeURIComponent(query)}`);\r\n    return res.data; // assumes it returns [{ id, name, email }]\r\n  };\r\n\r\n  export const getMyPayments = async () => {\r\n    const res = await api.get('/payments/mine');\r\n    return res.data;\r\n  };\r\n  \r\n  export const getDashboardSummary = async () => {\r\n    const res = await api.get('/dashboard/summary');\r\n    return res.data;\r\n  };\r\n\r\n  export const getDashboardStats = async () => {\r\n    const res = await api.get('/dashboard/stats');\r\n    return res.data;\r\n  };\r\n  \r\n  export const getTenantPayments = async (id) => {\r\n  const res = await api.get(`/tenants/${id}/payments`);\r\n  return res.data;\r\n};\r\n\r\nexport const getTenantMaintenance = async (id) => {\r\n  const res = await api.get(`/tenants/${id}/maintenance`);\r\n  return res.data;\r\n};\r\n\r\nexport const getTenants = async (search = '') => {\r\n    const res = await api.get(`/users?role=tenant&search=${encodeURIComponent(search)}`);\r\n    return res.data;\r\n  };\r\n  "],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;;;;;;;;;;AAC7B;;AAEO,MAAM,cAAc;IACzB,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,2BAA2B,OAAO;IAC7C,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,gBAAgB;IAC3C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,yBAAyB;IACpC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,0BAA0B,OAAO,IAAI;IAChD,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,IAAI,EAAE;QAAE;IAAO;IACzD,OAAO,IAAI,IAAI;AACjB;AACO,MAAM,mBAAmB,OAAO;IACrC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ;IACrD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB,OAAO;IACxC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,mBAAmB;IAC9C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB,OAAO,QAAQ;IAChD,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ,EAAE;IACvD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,gBAAgB,OAAO;IAChC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,aAAa;IACxC,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,cAAc,OAAO;IAChC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,mBAAmB,QAAQ;IACtE,OAAO,IAAI,IAAI,EAAE,2CAA2C;AAC9D;AAEO,MAAM,gBAAgB;IAC3B,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB;IACjC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,oBAAoB;IAC/B,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,oBAAoB,OAAO;IACxC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,GAAG,SAAS,CAAC;IACnD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,uBAAuB,OAAO;IACzC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,GAAG,YAAY,CAAC;IACtD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO,SAAS,EAAE;IACxC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,mBAAmB,SAAS;IACnF,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/features/MaintenanceList.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport  AuthContext  from '@/context/AuthContext';\r\nimport {\r\n  getMaintenanceRequests,\r\n  updateMaintenanceStatus,\r\n} from '@/services/apiService';\r\n\r\nexport default function MaintenanceList() {\r\n  const { user } = useContext(AuthContext);\r\n  const [requests, setRequests] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [updatingId, setUpdatingId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (user && (user.role === 'staff' || user.role === 'admin')) {\r\n      getMaintenanceRequests()\r\n        .then((data) => setRequests(data))\r\n        .catch((err) => console.error('Error fetching maintenance requests:', err))\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [user]);\r\n\r\n  const handleStatusChange = async (id, newStatus) => {\r\n    try {\r\n      setUpdatingId(id);\r\n      const updated = await updateMaintenanceStatus(id, newStatus);\r\n      setRequests((prev) =>\r\n        prev.map((req) => (req.id === id ? { ...req, status: updated.status } : req))\r\n      );\r\n    } catch (err) {\r\n      console.error('Status update failed:', err);\r\n    } finally {\r\n      setUpdatingId(null);\r\n    }\r\n  };\r\n\r\n  if (!user || !['staff', 'admin'].includes(user.role)) {\r\n    return <p className=\"text-red-500\">Unauthorized: Staff/Admin access only</p>;\r\n  }\r\n\r\n  if (loading) return <p>Loading maintenance requests...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto bg-white p-6 rounded shadow\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Maintenance Requests</h2>\r\n\r\n      {requests.length === 0 ? (\r\n        <p>No maintenance requests found.</p>\r\n      ) : (\r\n        <ul className=\"space-y-4\">\r\n          {requests.map((req) => (\r\n            <li key={req.id} className=\"p-4 border rounded bg-gray-50 space-y-2\">\r\n              <p><strong>Description:</strong> {req.description}</p>\r\n              <p><strong>Priority:</strong> {req.priority}</p>\r\n              <p><strong>Created:</strong> {new Date(req.createdAt).toLocaleDateString()}</p>\r\n\r\n              {req.photoUrl && (\r\n                <p>\r\n                  <strong>Photo:</strong>{' '}\r\n                  <a href={req.photoUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 underline\">\r\n                    View Image\r\n                  </a>\r\n                </p>\r\n              )}\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <label><strong>Status:</strong></label>\r\n                <select\r\n                  value={req.status}\r\n                  onChange={(e) => handleStatusChange(req.id, e.target.value)}\r\n                  className=\"border px-2 py-1 rounded\"\r\n                  disabled={updatingId === req.id}\r\n                >\r\n                  <option value=\"Received\">Received</option>\r\n                  <option value=\"In Progress\">In Progress</option>\r\n                  <option value=\"Completed\">Completed</option>\r\n                </select>\r\n                {updatingId === req.id && <span className=\"text-sm text-gray-500\">Updating...</span>}\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}