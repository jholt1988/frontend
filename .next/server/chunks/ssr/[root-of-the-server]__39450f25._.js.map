{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const token = localStorage.getItem(\"token\");\r\n            if (token) {\r\n                try {\r\n                    const response = await axios.get(\r\n                        `/api/users/me/${user._id}`,\r\n                        {\r\n                            headers: { Authorization: `Bearer ${token}` },\r\n                        }\r\n                    );\r\n                    setUser(response.data.user);\r\n                } catch (error) {\r\n                    setUser(null);\r\n                }\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n   \r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, setUser, loading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContext;\r\n\r\n // useEffect(() => {\r\n    //     const fetchUser = async () => {\r\n    //         const token = getToken();\r\n    //         if (token) {\r\n    //             try {\r\n    //                 const response = await axios.get(\r\n    //                   `/api/users/me/${user._id}`,\r\n    //                   {\r\n    //                     headers: { Authorization: `Bearer ${token}` },\r\n    //                   }\r\n    //                 );\r\n    //                 setUser(response.data.user);\r\n    //             } catch (error) {\r\n    //                 logoutUser();\r\n    //                 setUser(null);\r\n    //             }\r\n    //         }\r\n    //         setLoading(false);\r\n    //     };\r\n    //     fetchUser();\r\n    // }, []);"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAEA,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD;AAEzB,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACN,MAAM,YAAY;YACd,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACP,IAAI;oBACA,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAC5B,CAAC,cAAc,EAAE,KAAK,GAAG,EAAE,EAC3B;wBACI,SAAS;4BAAE,eAAe,CAAC,OAAO,EAAE,OAAO;wBAAC;oBAChD;oBAEJ,QAAQ,SAAS,IAAI,CAAC,IAAI;gBAC9B,EAAE,OAAO,OAAO;oBACZ,QAAQ;gBACZ;YACJ;YACA,WAAW;QACf;QACA;IACJ,GAAG,EAAE;IAGL,qBACI,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAQ;kBACjD;;;;;;AAGb;uCAEe;CAEd,oBAAoB;CACjB,sCAAsC;CACtC,oCAAoC;CACpC,uBAAuB;CACvB,oBAAoB;CACpB,oDAAoD;CACpD,iDAAiD;CACjD,sBAAsB;CACtB,qEAAqE;CACrE,sBAAsB;CACtB,qBAAqB;CACrB,+CAA+C;CAC/C,gCAAgC;CAChC,gCAAgC;CAChC,iCAAiC;CACjC,gBAAgB;CAChB,YAAY;CACZ,6BAA6B;CAC7B,SAAS;CACT,mBAAmB;CACnB,UAAU","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/layout.js"],"sourcesContent":["// app/layout.js\n'use client';\n\nimport './globals.css';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useContext } from 'react';\nimport  AuthContext  from '@/context/AuthContext';\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <AuthContext>\n          <Layout>{children}</Layout>\n        </AuthContext>\n      </body>\n    </html>\n  );\n}\n\nfunction Layout({ children }) {\n  const { user, logout } = useContext(AuthContext);\n  const router = useRouter();\n\n  const handleLogout = () => {\n    logout();\n    router.push('/login');\n  };\n\n  return (\n    <div className=\"min-h-screen flex\">\n      <aside className=\"w-64 bg-gray-900 text-white p-6 space-y-4\">\n        <h1 className=\"text-xl font-bold\">PDL Rentals</h1>\n        <nav className=\"space-y-2\">\n          <Link href=\"/\" className=\"block hover:text-blue-400\">Dashboard</Link>\n\n          {user?.role === 'tenant' && (\n            <>\n              <Link href=\"/tenant-profile\" className=\"block hover:text-blue-400\">My Profile</Link>\n              <Link href=\"/maintenance-request\" className=\"block hover:text-blue-400\">Submit Maintenance</Link>\n            </>\n          )}\n\n          {['staff', 'admin'].includes(user?.role) && (\n            <>\n              <Link href=\"/maintenance\" className=\"block hover:text-blue-400\">View Maintenance</Link>\n              <Link href=\"/payments\" className=\"block hover:text-blue-400\">Payments</Link>\n            </>\n          )}\n          {user?.role === 'tenant' && (\n            <Link href=\"/payments/history\" className=\"block hover:text-blue-400\">\n              My Payments\n            </Link>\n          )}\n          {['admin', 'staff'].includes(user?.role) && (\n            <Link href=\"/dashboard\" className=\"block hover:text-blue-400\">\n              Dashboard\n            </Link>\n          )}\n\n          {['staff', 'admin'].includes(user?.role) && (\n            <Link href=\"/tenants\" className=\"block hover:text-blue-400\">Tenant Directory</Link>\n          )}\n\n\n          <button onClick={handleLogout} className=\"mt-4 text-red-400 hover:text-red-300\">\n            Logout\n          </button>\n        </nav>\n      </aside>\n      <main className=\"flex-1 bg-gray-100 p-6 overflow-y-auto\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;;AAIhB;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;sBACC,cAAA,8OAAC,oIAAA,CAAA,UAAW;0BACV,cAAA,8OAAC;8BAAQ;;;;;;;;;;;;;;;;;;;;;AAKnB;AAEA,SAAS,OAAO,EAAE,QAAQ,EAAE;IAC1B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,oIAAA,CAAA,UAAW;IAC/C,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe;QACnB;QACA,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;;kCACf,8OAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAClC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAI,WAAU;0CAA4B;;;;;;4BAEpD,MAAM,SAAS,0BACd;;kDACE,8OAAC,4JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAkB,WAAU;kDAA4B;;;;;;kDACnE,8OAAC,4JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAuB,WAAU;kDAA4B;;;;;;;;4BAI3E;gCAAC;gCAAS;6BAAQ,CAAC,QAAQ,CAAC,MAAM,uBACjC;;kDACE,8OAAC,4JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAe,WAAU;kDAA4B;;;;;;kDAChE,8OAAC,4JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAY,WAAU;kDAA4B;;;;;;;;4BAGhE,MAAM,SAAS,0BACd,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAoB,WAAU;0CAA4B;;;;;;4BAItE;gCAAC;gCAAS;6BAAQ,CAAC,QAAQ,CAAC,MAAM,uBACjC,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAa,WAAU;0CAA4B;;;;;;4BAK/D;gCAAC;gCAAS;6BAAQ,CAAC,QAAQ,CAAC,MAAM,uBACjC,8OAAC,4JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAW,WAAU;0CAA4B;;;;;;0CAI9D,8OAAC;gCAAO,SAAS;gCAAc,WAAU;0CAAuC;;;;;;;;;;;;;;;;;;0BAKpF,8OAAC;gBAAK,WAAU;0BAA0C;;;;;;;;;;;;AAGhE","debugId":null}}]
}