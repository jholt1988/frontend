{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/services/axiosInstance.js"],"sourcesContent":["// src/services/axiosInstance.js\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n// Create base axios instance\r\nconst api = axios.create({\r\n  baseURL: process.env.API_URL || 'http://localhost:5000/api/v1',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n\r\n  },\r\n  \r\n});\r\n\r\n// Automatically attach token (if exists)\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Optional: Global error handler (e.g., auto logout on 401)\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      console.warn('â›” Unauthorized - logging out');\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;AAEhC;;AAGA,6BAA6B;AAC7B,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,QAAQ,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS;QACP,gBAAgB;IAElB;AAEF;AAEA,yCAAyC;AACzC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAEA,4DAA4D;AAC5D,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;QACnD,QAAQ,IAAI,CAAC;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/services/apiService.js"],"sourcesContent":["// src/services/apiService.js\r\nimport api from './axiosInstance';\r\n\r\nexport const getPayments = async () => {\r\n  const res = await api.get('/payments/mine');\r\n  return res.data;\r\n};\r\n\r\nexport const createMaintenanceRequest = async (data) => {\r\n  const res = await api.post('/maintenance', data);\r\n  return res.data;\r\n};\r\n\r\nexport const getMaintenanceRequests = async () => {\r\n  const res = await api.get('/maintenance');\r\n  return res.data;\r\n};\r\n\r\nexport const getTenantProfile = async (userId) => {\r\n  const res = await api.get(`/tenant-profile/${userId}`);\r\n  return res.data;\r\n};\r\n\r\nexport const createTenantProfile = async (profile) => {\r\n  const res = await api.post('/tenant-profile', profile);\r\n  return res.data;\r\n};\r\n\r\nexport const updateTenantProfile = async (userId, profile) => {\r\n  const res = await api.put(`/tenant-profile/${userId}`, profile);\r\n  return res.data;\r\n};\r\n\r\nexport const createPayment = async (data) => {\r\n    const res = await api.post('/payments', data);\r\n    return res.data;\r\n  };\r\n  \r\n  export const searchUsers = async (query) => {\r\n    const res = await api.get(`/users?search=${encodeURIComponent(query)}`);\r\n    return res.data; // assumes it returns [{ id, name, email }]\r\n  };\r\n\r\n  export const getMyPayments = async () => {\r\n    const res = await api.get('/payments/mine');\r\n    return res.data;\r\n  };\r\n  \r\n  export const getDashboardSummary = async () => {\r\n    const res = await api.get('/dashboard/summary');\r\n    return res.data;\r\n  };\r\n\r\n  export const getDashboardStats = async () => {\r\n    const res = await api.get('/dashboard/stats');\r\n    return res.data;\r\n  };\r\n  \r\n  export const getTenantPayments = async (id) => {\r\n  const res = await api.get(`/tenants/${id}/payments`);\r\n  return res.data;\r\n};\r\n\r\nexport const getTenantMaintenance = async (id) => {\r\n  const res = await api.get(`/tenants/${id}/maintenance`);\r\n  return res.data;\r\n};\r\n\r\nexport const getTenants = async (search = '') => {\r\n    const res = await api.get(`/users?role=tenant&search=${encodeURIComponent(search)}`);\r\n    return res.data;\r\n  };\r\n  "],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;;;;;;;;;AAC7B;;AAEO,MAAM,cAAc;IACzB,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,2BAA2B,OAAO;IAC7C,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,gBAAgB;IAC3C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,yBAAyB;IACpC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ;IACrD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB,OAAO;IACxC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,mBAAmB;IAC9C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB,OAAO,QAAQ;IAChD,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ,EAAE;IACvD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,gBAAgB,OAAO;IAChC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,aAAa;IACxC,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,cAAc,OAAO;IAChC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,mBAAmB,QAAQ;IACtE,OAAO,IAAI,IAAI,EAAE,2CAA2C;AAC9D;AAEO,MAAM,gBAAgB;IAC3B,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB;IACjC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,oBAAoB;IAC/B,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,oBAAoB,OAAO;IACxC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,GAAG,SAAS,CAAC;IACnD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,uBAAuB,OAAO;IACzC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,GAAG,YAAY,CAAC;IACtD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO,SAAS,EAAE;IACxC,MAAM,MAAM,MAAM,uIAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,mBAAmB,SAAS;IACnF,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/features/MaintenanceRequest.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useContext } from 'react';\r\nimport  AuthContext  from '@/context/AuthContext';\r\nimport { createMaintenanceRequest } from '@/services/apiService';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function MaintenanceRequest() {\r\n  const { user } = useContext(AuthContext);\r\n  const router = useRouter();\r\n\r\n  const [formData, setFormData] = useState({\r\n    description: '',\r\n    priority: 'medium',\r\n    photoUrl: '',\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [submitted, setSubmitted] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      await createMaintenanceRequest(formData);\r\n      setSubmitted(true);\r\n      setFormData({ description: '', priority: 'medium', photoUrl: '' });\r\n    } catch (err) {\r\n      console.error('Maintenance request failed:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!user || user.role !== 'tenant') {\r\n    return <p className=\"text-red-500\">Unauthorized: Tenants only</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto bg-white p-6 rounded shadow\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Submit Maintenance Request</h2>\r\n\r\n      {submitted && <p className=\"text-green-600 mb-4\">Request submitted successfully!</p>}\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <textarea\r\n          name=\"description\"\r\n          value={formData.description}\r\n          onChange={handleChange}\r\n          placeholder=\"Describe the issue...\"\r\n          required\r\n          className=\"input min-h-[100px]\"\r\n        />\r\n\r\n        <select name=\"priority\" value={formData.priority} onChange={handleChange} className=\"input\">\r\n          <option value=\"low\">Low</option>\r\n          <option value=\"medium\">Medium</option>\r\n          <option value=\"high\">High</option>\r\n        </select>\r\n\r\n        <input\r\n          type=\"url\"\r\n          name=\"photoUrl\"\r\n          value={formData.photoUrl}\r\n          onChange={handleChange}\r\n          placeholder=\"Photo URL (optional)\"\r\n          className=\"input\"\r\n        />\r\n\r\n        <button type=\"submit\" className=\"btn btn-primary\" disabled={loading}>\r\n          {loading ? 'Submitting...' : 'Submit Request'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,oIAAA,CAAA,UAAW;IACvC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;QACvC,aAAa;QACb,UAAU;QACV,UAAU;IACZ;IAEA,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,MAAM,eAAe,CAAC;QACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,KAAK,EAAE;YAAM,CAAC;IACnD;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,WAAW;QACX,IAAI;YACF,MAAM,CAAA,GAAA,oIAAA,CAAA,2BAAwB,AAAD,EAAE;YAC/B,aAAa;YACb,YAAY;gBAAE,aAAa;gBAAI,UAAU;gBAAU,UAAU;YAAG;QAClE,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC/C,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,UAAU;QACnC,qBAAO,8OAAC;YAAE,WAAU;sBAAe;;;;;;IACrC;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,2BAAa,8OAAC;gBAAE,WAAU;0BAAsB;;;;;;0BAEjD,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,8OAAC;wBACC,MAAK;wBACL,OAAO,SAAS,WAAW;wBAC3B,UAAU;wBACV,aAAY;wBACZ,QAAQ;wBACR,WAAU;;;;;;kCAGZ,8OAAC;wBAAO,MAAK;wBAAW,OAAO,SAAS,QAAQ;wBAAE,UAAU;wBAAc,WAAU;;0CAClF,8OAAC;gCAAO,OAAM;0CAAM;;;;;;0CACpB,8OAAC;gCAAO,OAAM;0CAAS;;;;;;0CACvB,8OAAC;gCAAO,OAAM;0CAAO;;;;;;;;;;;;kCAGvB,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,OAAO,SAAS,QAAQ;wBACxB,UAAU;wBACV,aAAY;wBACZ,WAAU;;;;;;kCAGZ,8OAAC;wBAAO,MAAK;wBAAS,WAAU;wBAAkB,UAAU;kCACzD,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;AAKvC","debugId":null}}]
}