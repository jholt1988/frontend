{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/services/axiosInstance.js"],"sourcesContent":["// src/services/axiosInstance.js\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n// Create base axios instance\r\nconst api = axios.create({\r\n  baseURL: process.env.API_URL || 'http://localhost:5000/api/v1',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Automatically attach token (if exists)\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Optional: Global error handler (e.g., auto logout on 401)\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      console.warn('â›” Unauthorized - logging out');\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;AAOrB;AALX;;AAGA,6BAA6B;AAC7B,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,yCAAyC;AACzC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAEA,4DAA4D;AAC5D,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;QACnD,QAAQ,IAAI,CAAC;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/services/authService.js"],"sourcesContent":["// src/services/authService.js\r\nimport api from './axiosInstance';\r\n\r\nexport const loginUser = async (userData) => {\r\n  const res = await api.post('/auth/login', userData);\r\n  return res.data;\r\n};\r\n\r\nexport const registerUser = async (userData) => {\r\n  const res = await api.post('/auth/register', userData);\r\n  return res.data;\r\n};\r\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAC9B;;AAEO,MAAM,YAAY,OAAO;IAC9B,MAAM,MAAM,MAAM,mIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,eAAe;IAC1C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,eAAe,OAAO;IACjC,MAAM,MAAM,MAAM,mIAAA,CAAA,UAAG,CAAC,IAAI,CAAC,kBAAkB;IAC7C,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 72, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/context/AuthContext.js"],"sourcesContent":["import { createContext, useState, useEffect } from \"react\";\r\nimport { getToken, logoutUser } from \"../services/authService\";\r\nimport axios from \"axios\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () => {\r\n            const token = getToken();\r\n            if (token) {\r\n                try {\r\n                    const response = await axios.get(\r\n                      `/api/users/me/${user._id}`,\r\n                      {\r\n                        headers: { Authorization: `Bearer ${token}` },\r\n                      }\r\n                    );\r\n                    setUser(response.data.user);\r\n                } catch (error) {\r\n                    logoutUser();\r\n                    setUser(null);\r\n                }\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchUser();\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, setUser, loading }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContext;\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAEA,MAAM,4BAAc,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAEzB,MAAM,eAAe,CAAC,EAAE,QAAQ,EAAE;;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;kCAAE;YACN,MAAM;oDAAY;oBACd,MAAM,QAAQ,CAAA,GAAA,iIAAA,CAAA,WAAQ,AAAD;oBACrB,IAAI,OAAO;wBACP,IAAI;4BACA,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAC9B,CAAC,cAAc,EAAE,KAAK,GAAG,EAAE,EAC3B;gCACE,SAAS;oCAAE,eAAe,CAAC,OAAO,EAAE,OAAO;gCAAC;4BAC9C;4BAEF,QAAQ,SAAS,IAAI,CAAC,IAAI;wBAC9B,EAAE,OAAO,OAAO;4BACZ,CAAA,GAAA,iIAAA,CAAA,aAAU,AAAD;4BACT,QAAQ;wBACZ;oBACJ;oBACA,WAAW;gBACf;;YACA;QACJ;iCAAG,EAAE;IAEL,qBACI,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;QAAQ;kBACjD;;;;;;AAGb;GA/Ba;KAAA;uCAiCE","debugId":null}},
    {"offset": {"line": 141, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/layout.js"],"sourcesContent":["// app/layout.js\n'use client';\n\nimport './globals.css';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\nimport { useContext } from 'react';\nimport { AuthProvider, AuthContext } from '../context/AuthContext';\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <AuthProvider>\n          <Layout>{children}</Layout>\n        </AuthProvider>\n      </body>\n    </html>\n  );\n}\n\nfunction Layout({ children }) {\n  const { user, logout } = useContext(AuthContext);\n  const router = useRouter();\n\n  const handleLogout = () => {\n    logout();\n    router.push('/login');\n  };\n\n  return (\n    <div className=\"min-h-screen flex\">\n      <aside className=\"w-64 bg-gray-900 text-white p-6 space-y-4\">\n        <h1 className=\"text-xl font-bold\">PDL Rentals</h1>\n        <nav className=\"space-y-2\">\n          <Link href=\"/\" className=\"block hover:text-blue-400\">Dashboard</Link>\n\n          {user?.role === 'tenant' && (\n            <>\n              <Link href=\"/tenant-profile\" className=\"block hover:text-blue-400\">My Profile</Link>\n              <Link href=\"/maintenance-request\" className=\"block hover:text-blue-400\">Submit Maintenance</Link>\n            </>\n          )}\n\n          {['staff', 'admin'].includes(user?.role) && (\n            <>\n              <Link href=\"/maintenance\" className=\"block hover:text-blue-400\">View Maintenance</Link>\n              <Link href=\"/payments\" className=\"block hover:text-blue-400\">Payments</Link>\n            </>\n          )}\n          {user?.role === 'tenant' && (\n            <Link href=\"/payments/history\" className=\"block hover:text-blue-400\">\n              My Payments\n            </Link>\n          )}\n          {['admin', 'staff'].includes(user?.role) && (\n            <Link href=\"/dashboard\" className=\"block hover:text-blue-400\">\n              Dashboard\n            </Link>\n          )}\n\n          {['staff', 'admin'].includes(user?.role) && (\n            <Link href=\"/tenants\" className=\"block hover:text-blue-400\">Tenant Directory</Link>\n          )}\n\n\n          <button onClick={handleLogout} className=\"mt-4 text-red-400 hover:text-red-300\">\n            Logout\n          </button>\n        </nav>\n      </aside>\n      <main className=\"flex-1 bg-gray-100 p-6 overflow-y-auto\">{children}</main>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,gBAAgB;;;;;AAIhB;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,qBACE,6LAAC;QAAK,MAAK;kBACT,cAAA,6LAAC;sBACC,cAAA,6LAAC,gIAAA,CAAA,eAAY;0BACX,cAAA,6LAAC;8BAAQ;;;;;;;;;;;;;;;;;;;;;AAKnB;KAVwB;AAYxB,SAAS,OAAO,EAAE,QAAQ,EAAE;;IAC1B,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,gIAAA,CAAA,cAAW;IAC/C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,eAAe;QACnB;QACA,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAM,WAAU;;kCACf,6LAAC;wBAAG,WAAU;kCAAoB;;;;;;kCAClC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAI,WAAU;0CAA4B;;;;;;4BAEpD,MAAM,SAAS,0BACd;;kDACE,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAkB,WAAU;kDAA4B;;;;;;kDACnE,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAuB,WAAU;kDAA4B;;;;;;;;4BAI3E;gCAAC;gCAAS;6BAAQ,CAAC,QAAQ,CAAC,MAAM,uBACjC;;kDACE,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAe,WAAU;kDAA4B;;;;;;kDAChE,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAY,WAAU;kDAA4B;;;;;;;;4BAGhE,MAAM,SAAS,0BACd,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAoB,WAAU;0CAA4B;;;;;;4BAItE;gCAAC;gCAAS;6BAAQ,CAAC,QAAQ,CAAC,MAAM,uBACjC,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAa,WAAU;0CAA4B;;;;;;4BAK/D;gCAAC;gCAAS;6BAAQ,CAAC,QAAQ,CAAC,MAAM,uBACjC,6LAAC,+JAAA,CAAA,UAAI;gCAAC,MAAK;gCAAW,WAAU;0CAA4B;;;;;;0CAI9D,6LAAC;gCAAO,SAAS;gCAAc,WAAU;0CAAuC;;;;;;;;;;;;;;;;;;0BAKpF,6LAAC;gBAAK,WAAU;0BAA0C;;;;;;;;;;;;AAGhE;GArDS;;QAEQ,qIAAA,CAAA,YAAS;;;MAFjB","debugId":null}}]
}