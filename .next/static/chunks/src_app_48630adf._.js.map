{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/services/axiosInstance.js"],"sourcesContent":["// src/services/axiosInstance.js\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n// Create base axios instance\r\nconst api = axios.create({\r\n  baseURL: process.env.API_URL || 'http://localhost:5000/api/v1',\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n\r\n  },\r\n  \r\n});\r\n\r\n// Automatically attach token (if exists)\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Optional: Global error handler (e.g., auto logout on 401)\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      console.warn('⛔ Unauthorized - logging out');\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;AAOrB;AALX;;AAGA,6BAA6B;AAC7B,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,gKAAA,CAAA,UAAO,CAAC,GAAG,CAAC,OAAO,IAAI;IAChC,SAAS;QACP,gBAAgB;IAElB;AAEF;AAEA,yCAAyC;AACzC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;AAEA,4DAA4D;AAC5D,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,IAAI,MAAM,QAAQ,CAAC,MAAM,KAAK,KAAK;QACnD,QAAQ,IAAI,CAAC;QACb,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/services/apiService.js"],"sourcesContent":["// src/services/apiService.js\r\nimport api from './axiosInstance';\r\n\r\nexport const getPayments = async () => {\r\n  const res = await api.get('/payments/mine');\r\n  return res.data;\r\n};\r\n\r\nexport const createMaintenanceRequest = async (data) => {\r\n  const res = await api.post('/maintenance', data);\r\n  return res.data;\r\n};\r\n\r\nexport const getMaintenanceRequests = async () => {\r\n  const res = await api.get('/maintenance');\r\n  return res.data;\r\n};\r\n\r\nexport const getTenantProfile = async (userId) => {\r\n  const res = await api.get(`/tenant-profile/${userId}`);\r\n  return res.data;\r\n};\r\n\r\nexport const createTenantProfile = async (profile) => {\r\n  const res = await api.post('/tenant-profile', profile);\r\n  return res.data;\r\n};\r\n\r\nexport const updateTenantProfile = async (userId, profile) => {\r\n  const res = await api.put(`/tenant-profile/${userId}`, profile);\r\n  return res.data;\r\n};\r\n\r\nexport const createPayment = async (data) => {\r\n    const res = await api.post('/payments', data);\r\n    return res.data;\r\n  };\r\n  \r\n  export const searchUsers = async (query) => {\r\n    const res = await api.get(`/users?search=${encodeURIComponent(query)}`);\r\n    return res.data; // assumes it returns [{ id, name, email }]\r\n  };\r\n\r\n  export const getMyPayments = async () => {\r\n    const res = await api.get('/payments/mine');\r\n    return res.data;\r\n  };\r\n  \r\n  export const getDashboardSummary = async () => {\r\n    const res = await api.get('/dashboard/summary');\r\n    return res.data;\r\n  };\r\n\r\n  export const getDashboardStats = async () => {\r\n    const res = await api.get('/dashboard/stats');\r\n    return res.data;\r\n  };\r\n  \r\n  export const getTenantPayments = async (id) => {\r\n  const res = await api.get(`/tenants/${id}/payments`);\r\n  return res.data;\r\n};\r\n\r\nexport const getTenantMaintenance = async (id) => {\r\n  const res = await api.get(`/tenants/${id}/maintenance`);\r\n  return res.data;\r\n};\r\n\r\nexport const getTenants = async (search = '') => {\r\n    const res = await api.get(`/users?role=tenant&search=${encodeURIComponent(search)}`);\r\n    return res.data;\r\n  };\r\n  "],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;;;;;;;;;AAC7B;;AAEO,MAAM,cAAc;IACzB,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,2BAA2B,OAAO;IAC7C,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,IAAI,CAAC,gBAAgB;IAC3C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,yBAAyB;IACpC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,mBAAmB,OAAO;IACrC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ;IACrD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB,OAAO;IACxC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,IAAI,CAAC,mBAAmB;IAC9C,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB,OAAO,QAAQ;IAChD,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,gBAAgB,EAAE,QAAQ,EAAE;IACvD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,gBAAgB,OAAO;IAChC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,IAAI,CAAC,aAAa;IACxC,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,cAAc,OAAO;IAChC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,mBAAmB,QAAQ;IACtE,OAAO,IAAI,IAAI,EAAE,2CAA2C;AAC9D;AAEO,MAAM,gBAAgB;IAC3B,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,sBAAsB;IACjC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,oBAAoB;IAC/B,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC;IAC1B,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,oBAAoB,OAAO;IACxC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,GAAG,SAAS,CAAC;IACnD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,uBAAuB,OAAO;IACzC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,GAAG,YAAY,CAAC;IACtD,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,aAAa,OAAO,SAAS,EAAE;IACxC,MAAM,MAAM,MAAM,0IAAA,CAAA,UAAG,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,mBAAmB,SAAS;IACnF,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/features/PaymentHistory.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport  AuthContext from '@/context/AuthContext';\r\nimport { getMyPayments } from '@/services/apiService';\r\n\r\nexport default function PaymentHistory() {\r\n  const { user } = useContext(AuthContext);\r\n  const [payments, setPayments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (user?.role === 'tenant') {\r\n      getMyPayments()\r\n        .then((data) => setPayments(data))\r\n        .catch((err) => console.error('Failed to load payment history:', err))\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [user]);\r\n\r\n  if (!user || user.role !== 'tenant') {\r\n    return <p className=\"text-red-500\">Unauthorized: Tenants only</p>;\r\n  }\r\n\r\n  if (loading) return <p>Loading payment history...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto bg-white p-6 rounded shadow\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">My Payment History</h2>\r\n\r\n      {payments.length === 0 ? (\r\n        <p>You have no payments recorded yet.</p>\r\n      ) : (\r\n        <table className=\"w-full table-auto border-collapse\">\r\n          <thead className=\"bg-gray-200\">\r\n            <tr>\r\n              <th className=\"text-left p-2 border\">Amount</th>\r\n              <th className=\"text-left p-2 border\">Status</th>\r\n              <th className=\"text-left p-2 border\">Paid At</th>\r\n              <th className=\"text-left p-2 border\">Recorded</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {payments.map((pay) => (\r\n              <tr key={pay.id} className=\"border-t\">\r\n                <td className=\"p-2 border\">${pay.amount}</td>\r\n                <td className=\"p-2 border\">{pay.status}</td>\r\n                <td className=\"p-2 border\">\r\n                  {pay.paidAt ? new Date(pay.paidAt).toLocaleDateString() : '—'}\r\n                </td>\r\n                <td className=\"p-2 border\">{new Date(pay.createdAt).toLocaleDateString()}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,uIAAA,CAAA,UAAW;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,IAAI,MAAM,SAAS,UAAU;gBAC3B,CAAA,GAAA,uIAAA,CAAA,gBAAa,AAAD,IACT,IAAI;gDAAC,CAAC,OAAS,YAAY;+CAC3B,KAAK;gDAAC,CAAC,MAAQ,QAAQ,KAAK,CAAC,mCAAmC;+CAChE,OAAO;gDAAC,IAAM,WAAW;;YAC9B;QACF;mCAAG;QAAC;KAAK;IAET,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,UAAU;QACnC,qBAAO,6LAAC;YAAE,WAAU;sBAAe;;;;;;IACrC;IAEA,IAAI,SAAS,qBAAO,6LAAC;kBAAE;;;;;;IAEvB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,SAAS,MAAM,KAAK,kBACnB,6LAAC;0BAAE;;;;;qCAEH,6LAAC;gBAAM,WAAU;;kCACf,6LAAC;wBAAM,WAAU;kCACf,cAAA,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;8CACrC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;8CACrC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;8CACrC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;;;;;;;;;;;;kCAGzC,6LAAC;kCACE,SAAS,GAAG,CAAC,CAAC,oBACb,6LAAC;gCAAgB,WAAU;;kDACzB,6LAAC;wCAAG,WAAU;;4CAAa;4CAAE,IAAI,MAAM;;;;;;;kDACvC,6LAAC;wCAAG,WAAU;kDAAc,IAAI,MAAM;;;;;;kDACtC,6LAAC;wCAAG,WAAU;kDACX,IAAI,MAAM,GAAG,IAAI,KAAK,IAAI,MAAM,EAAE,kBAAkB,KAAK;;;;;;kDAE5D,6LAAC;wCAAG,WAAU;kDAAc,IAAI,KAAK,IAAI,SAAS,EAAE,kBAAkB;;;;;;;+BAN/D,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;AAc7B;GApDwB;KAAA","debugId":null}}]
}