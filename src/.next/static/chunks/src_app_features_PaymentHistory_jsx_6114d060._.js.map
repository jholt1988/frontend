{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/plabr/PDL_APP/v2/frontend/src/app/features/PaymentHistory.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useContext } from 'react';\r\nimport { AuthContext } from '@/context/AuthContext';\r\nimport { getMyPayments } from '@services/apiService';\r\n\r\nexport default function PaymentHistory() {\r\n  const { user } = useContext(AuthContext);\r\n  const [payments, setPayments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (user?.role === 'tenant') {\r\n      getMyPayments()\r\n        .then((data) => setPayments(data))\r\n        .catch((err) => console.error('Failed to load payment history:', err))\r\n        .finally(() => setLoading(false));\r\n    }\r\n  }, [user]);\r\n\r\n  if (!user || user.role !== 'tenant') {\r\n    return <p className=\"text-red-500\">Unauthorized: Tenants only</p>;\r\n  }\r\n\r\n  if (loading) return <p>Loading payment history...</p>;\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto bg-white p-6 rounded shadow\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">My Payment History</h2>\r\n\r\n      {payments.length === 0 ? (\r\n        <p>You have no payments recorded yet.</p>\r\n      ) : (\r\n        <table className=\"w-full table-auto border-collapse\">\r\n          <thead className=\"bg-gray-200\">\r\n            <tr>\r\n              <th className=\"text-left p-2 border\">Amount</th>\r\n              <th className=\"text-left p-2 border\">Status</th>\r\n              <th className=\"text-left p-2 border\">Paid At</th>\r\n              <th className=\"text-left p-2 border\">Recorded</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {payments.map((pay) => (\r\n              <tr key={pay.id} className=\"border-t\">\r\n                <td className=\"p-2 border\">${pay.amount}</td>\r\n                <td className=\"p-2 border\">{pay.status}</td>\r\n                <td className=\"p-2 border\">\r\n                  {pay.paidAt ? new Date(pay.paidAt).toLocaleDateString() : 'â€”'}\r\n                </td>\r\n                <td className=\"p-2 border\">{new Date(pay.createdAt).toLocaleDateString()}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;;;;;;;AAHA;;;;AAMe,SAAS;;IACtB,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE,uIAAA,CAAA,cAAW;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,IAAI,MAAM,SAAS,UAAU;gBAC3B,gBACG,IAAI;gDAAC,CAAC,OAAS,YAAY;+CAC3B,KAAK;gDAAC,CAAC,MAAQ,QAAQ,KAAK,CAAC,mCAAmC;+CAChE,OAAO;gDAAC,IAAM,WAAW;;YAC9B;QACF;mCAAG;QAAC;KAAK;IAET,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,UAAU;QACnC,qBAAO,6LAAC;YAAE,WAAU;sBAAe;;;;;;IACrC;IAEA,IAAI,SAAS,qBAAO,6LAAC;kBAAE;;;;;;IAEvB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,SAAS,MAAM,KAAK,kBACnB,6LAAC;0BAAE;;;;;qCAEH,6LAAC;gBAAM,WAAU;;kCACf,6LAAC;wBAAM,WAAU;kCACf,cAAA,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;8CACrC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;8CACrC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;8CACrC,6LAAC;oCAAG,WAAU;8CAAuB;;;;;;;;;;;;;;;;;kCAGzC,6LAAC;kCACE,SAAS,GAAG,CAAC,CAAC,oBACb,6LAAC;gCAAgB,WAAU;;kDACzB,6LAAC;wCAAG,WAAU;;4CAAa;4CAAE,IAAI,MAAM;;;;;;;kDACvC,6LAAC;wCAAG,WAAU;kDAAc,IAAI,MAAM;;;;;;kDACtC,6LAAC;wCAAG,WAAU;kDACX,IAAI,MAAM,GAAG,IAAI,KAAK,IAAI,MAAM,EAAE,kBAAkB,KAAK;;;;;;kDAE5D,6LAAC;wCAAG,WAAU;kDAAc,IAAI,KAAK,IAAI,SAAS,EAAE,kBAAkB;;;;;;;+BAN/D,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;AAc7B;GApDwB;KAAA","debugId":null}}]
}